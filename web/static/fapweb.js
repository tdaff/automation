
/*jslint browser:true */

/** Take all the fields and create the fap file */
function generateFap() {
    "use strict";
    var fapfile = '#\n# .fap file generated by faps web UI\n#\n\n',
        formsCollection = document.getElementById('all-options'),
        r;

    for (r = 0; r < formsCollection.length; r += 1) {
        if (!formsCollection[r].disabled) {
            fapfile += formsCollection[r].id;
            fapfile += " = ";
            fapfile += formsCollection[r].value;
            fapfile += '\n';
        }
    }
    return fapfile;
}

function updateFap() {
    "use strict";
    var textArea = document.getElementById('generated-file');
    textArea.innerHTML = generateFap();
}

function switchActive(control) {
    "use strict";
    var input = document.getElementById(control);
    input.disabled = !input.disabled;
    updateFap();
}


/** upload fil with AJAX, thanks stack overflow http://stackoverflow.com/a/4943774 */
function submitJob() {
    "use strict";
    var fileInput = document.getElementById('job-form'),
        formData = new FormData(fileInput),
        xhr = new XMLHttpRequest();

    xhr.open('post', '/submit', true);
    xhr.send(formData);
    /* do something after */
}

